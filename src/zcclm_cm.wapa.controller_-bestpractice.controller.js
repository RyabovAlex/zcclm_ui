sap.ui.define([                                                                                                                                                                                                                                                
	"sap/ui/core/mvc/Controller"                                                                                                                                                                                                                                  
], function (Controller) {                                                                                                                                                                                                                                     
	"use strict";                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
	return Controller.extend("sap.cust.zcclm_cm.controller.BestPractice", {                                                                                                                                                                                       
		onInit: function () {                                                                                                                                                                                                                                        
			this.help = false;                                                                                                                                                                                                                                          
			// this.byId("idTable").getBinding().attachDataReceived(this.onPaint,                                                                                                                                                                                       
			// this);                                                                                                                                                                                                                                                   
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onPress: function (event) {                                                                                                                                                                                                                                  
			this.help = !this.help;                                                                                                                                                                                                                                     
			if (this.help) {                                                                                                                                                                                                                                            
				var rows = this.getView().byId("idTable").getRows();                                                                                                                                                                                                       
				for (var i = 0; i < rows.length; ++i) {                                                                                                                                                                                                                    
					var cells = rows[i].getCells();                                                                                                                                                                                                                           
					for (var j = 1; j < cells.length; ++j) {                                                                                                                                                                                                                  
						if ((i === 0) ||                                                                                                                                                                                                                                         
							(i === 1 && j === 3) ||                                                                                                                                                                                                                                 
							(i === 2 && j === 2) ||                                                                                                                                                                                                                                 
							(i === 3 && j === 1) ||                                                                                                                                                                                                                                 
							(i === 4 && j === 2) ||                                                                                                                                                                                                                                 
							(i === 5 && j === 3) ||                                                                                                                                                                                                                                 
							(i === 6) ||                                                                                                                                                                                                                                            
							(i === 7 && j === 3) ||                                                                                                                                                                                                                                 
							(i === 8)) {                                                                                                                                                                                                                                            
							this.setBGColor(document.getElementById(cells[j].sId).parentElement.parentElement.style, "#2b7d2b");                                                                                                                                                    
						} else if ((i === 1 && j === 2) ||                                                                                                                                                                                                                       
							(i === 2 && j === 1) ||                                                                                                                                                                                                                                 
							(i === 3 && j === 2) ||                                                                                                                                                                                                                                 
							(i === 4 && j === 1) ||                                                                                                                                                                                                                                 
							(i === 7 && j === 2)) {                                                                                                                                                                                                                                 
							this.setBGColor(document.getElementById(cells[j].sId).parentElement.parentElement.style, "#e78c07");                                                                                                                                                    
						} else {                                                                                                                                                                                                                                                 
							this.setBGColor(document.getElementById(cells[j].sId).parentElement.parentElement.style, "#bb0000");                                                                                                                                                    
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			} else {                                                                                                                                                                                                                                                    
				var rows = this.getView().byId("idTable").getRows();                                                                                                                                                                                                       
				for (var i = 0; i < rows.length; ++i) {                                                                                                                                                                                                                    
					var cells = rows[i].getCells();                                                                                                                                                                                                                           
					for (var j = 1; j < cells.length; ++j) {                                                                                                                                                                                                                  
						this.setBGColor(document.getElementById(cells[j].sId).parentElement.parentElement.style, "white");                                                                                                                                                       
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onBack: function () {                                                                                                                                                                                                                                        
			history.go(-1);                                                                                                                                                                                                                                             
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		toBoolean: function (str) {                                                                                                                                                                                                                                  
			return str === 'X' ? true : false;                                                                                                                                                                                                                          
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onChange: function (event) {                                                                                                                                                                                                                                 
			var src = event.getSource();                                                                                                                                                                                                                                
			var field = src.mBindingInfos.state.binding.getPath();                                                                                                                                                                                                      
			var path = src.mBindingInfos.state.binding.getContext().getPath();                                                                                                                                                                                          
			var model = src.getModel();                                                                                                                                                                                                                                 
			var obj = model.getObject(path);                                                                                                                                                                                                                            
			obj[field] = src.getState() ? 'X' : '';                                                                                                                                                                                                                     
			model.update(path, obj, null, null);                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		isIE: function () {                                                                                                                                                                                                                                          
			var userAgent = navigator.userAgent;                                                                                                                                                                                                                        
			return userAgent.indexOf("MSIE ") > -1 || userAgent.indexOf("Trident/") > -1 || userAgent.indexOf("Edge/") > -1;                                                                                                                                            
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		setBGColor: function (element, color) {                                                                                                                                                                                                                      
			if (this.isIE()) {                                                                                                                                                                                                                                          
				element.setAttribute("backgroundColor", color);                                                                                                                                                                                                            
			} else {                                                                                                                                                                                                                                                    
				element.backgroundColor = color;                                                                                                                                                                                                                           
			}                                                                                                                                                                                                                                                           
		}                                                                                                                                                                                                                                                            
	});                                                                                                                                                                                                                                                           
});                                                                                                                                                                                                                                                            