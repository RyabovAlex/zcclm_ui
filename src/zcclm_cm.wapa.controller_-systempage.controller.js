sap.ui.define(["sap/ui/core/mvc/Controller"], function (Controller) {                                                                                                                                                                                          
	"use strict";                                                                                                                                                                                                                                                 
	return Controller.extend("sap.cust.zcclm_cm.controller.SystemPage", {                                                                                                                                                                                         
		onInit: function () {                                                                                                                                                                                                                                        
			this.pageHeader = this.getView().byId("idObjectHeader");                                                                                                                                                                                                    
			this.iconTabFilterFirst = this.getView().byId("idIconTabFilterFirst");                                                                                                                                                                                      
			this.iconTabFilterSecond = this.getView().byId("idIconTabFilterSecond");                                                                                                                                                                                    
			this.iconTabFilterThird = this.getView().byId("idIconTabFilterThird");                                                                                                                                                                                      
			this.iconTabFilterForth = this.getView().byId("idIconTabFilterForth");                                                                                                                                                                                      
			this.getOwnerComponent().getRouter().getRoute("SystemPage").attachPatternMatched(this.onRouteMatched, this);                                                                                                                                                
			this._oPopover = new sap.ui.xmlfragment("sap.cust.zcclm_cm.view.ExtractorPopover", this);                                                                                                                                                                   
			this._oPopover2 = new sap.ui.xmlfragment("sap.cust.zcclm_cm.view.CollectorPopover", this);                                                                                                                                                                  
			this._oPopover3 = new sap.ui.xmlfragment("sap.cust.zcclm_cm.view.JobPopover", this);                                                                                                                                                                        
			this.getView().addDependent(this._oPopover);                                                                                                                                                                                                                
			this.getView().addDependent(this._oPopover2);                                                                                                                                                                                                               
			this.getView().addDependent(this._oPopover3);                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onRouteMatched: function (event) {                                                                                                                                                                                                                           
			var param = event.getParameter("arguments").Id.split("-");                                                                                                                                                                                                  
			this.systemId = param[1];                                                                                                                                                                                                                                   
			this.landscapeId = param[0];                                                                                                                                                                                                                                
			this.pageHeader.bindElement("/SYSTEM_STATUSSet(Landscapeid='" + this.landscapeId + "',Systemid='" + this.systemId + "')");                                                                                                                                  
			this.iconTabFilterFirst.bindElement("/SYSTEM_STATUSSet(Landscapeid='" + this.landscapeId + "',Systemid='" + this.systemId + "')");                                                                                                                          
			this.iconTabFilterSecond.bindElement("/SYSTEM_STATUSSet(Landscapeid='" + this.landscapeId + "',Systemid='" + this.systemId + "')");                                                                                                                         
			this.iconTabFilterThird.bindElement("/SYSTEM_STATUSSet(Landscapeid='" + this.landscapeId + "',Systemid='" + this.systemId + "')");                                                                                                                          
			this.iconTabFilterForth.bindElement("/SYSTEM_STATUSSet(Landscapeid='" + this.landscapeId + "',Systemid='" + this.systemId + "')");                                                                                                                          
			this.fillExtractorTables(this.systemId);                                                                                                                                                                                                                    
			this.fillCollectorsTables(this.systemId);                                                                                                                                                                                                                   
			this.fillJobsTable(this.systemId);                                                                                                                                                                                                                          
			this.fillNotesTable(this.systemId);                                                                                                                                                                                                                         
			this.fillKPIsTable(this.systemId);                                                                                                                                                                                                                          
		},                                                                                                                                                                                                                                                           
		fillExtractorTables: function (systemId) {                                                                                                                                                                                                                   
			var tables = [];                                                                                                                                                                                                                                            
			tables[0] = this.getView().byId("idGoodExtractors");                                                                                                                                                                                                        
			tables[1] = this.getView().byId("idRedundantExtractors");                                                                                                                                                                                                   
			tables[2] = this.getView().byId("idMissingExtractors");                                                                                                                                                                                                     
			var template = new sap.m.ColumnListItem({                                                                                                                                                                                                                   
				cells: [                                                                                                                                                                                                                                                   
					// new sap.m.Text({                                                                                                                                                                                                                                       
					// text: "{Systemid}"                                                                                                                                                                                                                                     
					// }),                                                                                                                                                                                                                                                    
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Extractorname}"                                                                                                                                                                                                                                  
					}),                                                                                                                                                                                                                                                       
					new sap.ui.core.Icon({                                                                                                                                                                                                                                    
						src: {                                                                                                                                                                                                                                                   
							path: "Extractorstatus",                                                                                                                                                                                                                                
							formatter: this.getStatusIcon                                                                                                                                                                                                                           
						},                                                                                                                                                                                                                                                       
						color: {                                                                                                                                                                                                                                                 
							path: "Extractorstatus",                                                                                                                                                                                                                                
							formatter: this.getStatusIconColor                                                                                                                                                                                                                      
						},                                                                                                                                                                                                                                                       
						size: "2em"                                                                                                                                                                                                                                              
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: {                                                                                                                                                                                                                                                  
							path: "Laststart",                                                                                                                                                                                                                                      
							formatter: this.convertExtractorTime                                                                                                                                                                                                                    
						}                                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: {                                                                                                                                                                                                                                                  
							path: "Laststop",                                                                                                                                                                                                                                       
							formatter: this.convertExtractorTime                                                                                                                                                                                                                    
						}                                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Lastrecordsnumber}"                                                                                                                                                                                                                              
					})                                                                                                                                                                                                                                                        
				],                                                                                                                                                                                                                                                         
				type: "Active",                                                                                                                                                                                                                                            
				press: [                                                                                                                                                                                                                                                   
					this.handleExtractorDetailsPress,                                                                                                                                                                                                                         
					this                                                                                                                                                                                                                                                      
				]                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			for (var i = 0; i < 3; i++) {                                                                                                                                                                                                                               
				var filters = [];                                                                                                                                                                                                                                          
				filters.push(new sap.ui.model.Filter("Systemid", sap.ui.model.FilterOperator.EQ, systemId));                                                                                                                                                               
				filters.push(new sap.ui.model.Filter("Bestpractice", sap.ui.model.FilterOperator.EQ, i));                                                                                                                                                                  
				var bindingInfo = {                                                                                                                                                                                                                                        
					path: "/EXTRACTORSet",                                                                                                                                                                                                                                    
					template: template,                                                                                                                                                                                                                                       
					filters: filters                                                                                                                                                                                                                                          
				};                                                                                                                                                                                                                                                         
				tables[i].bindItems(bindingInfo);                                                                                                                                                                                                                          
				tables[i].attachUpdateFinished(this.hideIfEmpty);                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		fillCollectorsTables: function (systemId) {                                                                                                                                                                                                                  
			var tables = [];                                                                                                                                                                                                                                            
			tables[0] = this.getView().byId("idGoodCollectors");                                                                                                                                                                                                        
			tables[1] = this.getView().byId("idRedundantCollectors");                                                                                                                                                                                                   
			tables[2] = this.getView().byId("idMissingCollectors");                                                                                                                                                                                                     
			var template = new sap.m.ColumnListItem({                                                                                                                                                                                                                   
				cells: [                                                                                                                                                                                                                                                   
					// new sap.m.Text({                                                                                                                                                                                                                                       
					// text: "{Systemid}"                                                                                                                                                                                                                                     
					// }),                                                                                                                                                                                                                                                    
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Collectorname}"                                                                                                                                                                                                                                  
					}),                                                                                                                                                                                                                                                       
					new sap.ui.core.Icon({                                                                                                                                                                                                                                    
						src: {                                                                                                                                                                                                                                                   
							path: "Collectorstatus",                                                                                                                                                                                                                                
							formatter: this.getStatusIcon                                                                                                                                                                                                                           
						},                                                                                                                                                                                                                                                       
						color: {                                                                                                                                                                                                                                                 
							path: "Collectorstatus",                                                                                                                                                                                                                                
							formatter: this.getStatusIconColor                                                                                                                                                                                                                      
						},                                                                                                                                                                                                                                                       
						size: "2em"                                                                                                                                                                                                                                              
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: {                                                                                                                                                                                                                                                  
							path: "Timestart",                                                                                                                                                                                                                                      
							formatter: this.convertCollectorTime                                                                                                                                                                                                                    
						}                                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: {                                                                                                                                                                                                                                                  
							path: "Timeend",                                                                                                                                                                                                                                        
							formatter: this.convertCollectorTime                                                                                                                                                                                                                    
						}                                                                                                                                                                                                                                                        
					})                                                                                                                                                                                                                                                        
				],                                                                                                                                                                                                                                                         
				type: "Active",                                                                                                                                                                                                                                            
				press: [                                                                                                                                                                                                                                                   
					this.handleCollectorDetailsPress,                                                                                                                                                                                                                         
					this                                                                                                                                                                                                                                                      
				]                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			for (var i = 0; i < 3; i++) {                                                                                                                                                                                                                               
				var filters = [];                                                                                                                                                                                                                                          
				filters.push(new sap.ui.model.Filter("Systemid", sap.ui.model.FilterOperator.EQ, systemId));                                                                                                                                                               
				filters.push(new sap.ui.model.Filter("Bestpractice", sap.ui.model.FilterOperator.EQ, i));                                                                                                                                                                  
				var bindingInfo = {                                                                                                                                                                                                                                        
					path: "/COLLECTORSet",                                                                                                                                                                                                                                    
					template: template,                                                                                                                                                                                                                                       
					filters: filters                                                                                                                                                                                                                                          
				};                                                                                                                                                                                                                                                         
				tables[i].bindItems(bindingInfo);                                                                                                                                                                                                                          
				tables[i].attachUpdateFinished(this.hideIfEmpty);                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		hideIfEmpty: function (event) {                                                                                                                                                                                                                              
			var table = event.getSource();                                                                                                                                                                                                                              
			table.setVisible(table.getItems().length !== 0);                                                                                                                                                                                                            
		},                                                                                                                                                                                                                                                           
		fillJobsTable: function (systemId) {                                                                                                                                                                                                                         
			var tables = [];                                                                                                                                                                                                                                            
			tables[0] = this.getView().byId("idGoodJobs");                                                                                                                                                                                                              
			tables[1] = this.getView().byId("idRedundantJobs");                                                                                                                                                                                                         
			tables[2] = this.getView().byId("idMissingJobs");                                                                                                                                                                                                           
			var template = new sap.m.ColumnListItem({                                                                                                                                                                                                                   
				cells: [                                                                                                                                                                                                                                                   
					// new sap.m.Text({                                                                                                                                                                                                                                       
					// text: "{Systemid}"                                                                                                                                                                                                                                     
					// }),                                                                                                                                                                                                                                                    
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Jobname}"                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Client}"                                                                                                                                                                                                                                         
					}),                                                                                                                                                                                                                                                       
					new sap.ui.core.Icon({                                                                                                                                                                                                                                    
						src: {                                                                                                                                                                                                                                                   
							path: "Status",                                                                                                                                                                                                                                         
							formatter: this.getJobsStatusIcon                                                                                                                                                                                                                       
						},                                                                                                                                                                                                                                                       
						color: {                                                                                                                                                                                                                                                 
							path: "Status",                                                                                                                                                                                                                                         
							formatter: this.getJobsStatusIconColor                                                                                                                                                                                                                  
						},                                                                                                                                                                                                                                                       
						size: "2em"                                                                                                                                                                                                                                              
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: {                                                                                                                                                                                                                                                  
							path: "StartDate",                                                                                                                                                                                                                                      
							formatter: this.convertCollectorTime                                                                                                                                                                                                                    
						}                                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{ScheduleFreq}"                                                                                                                                                                                                                                   
					})                                                                                                                                                                                                                                                        
				],                                                                                                                                                                                                                                                         
				type: "Active",                                                                                                                                                                                                                                            
				press: [                                                                                                                                                                                                                                                   
					this.handleJobDetailsPress,                                                                                                                                                                                                                               
					this                                                                                                                                                                                                                                                      
				]                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			for (var i = 0; i < 3; i++) {                                                                                                                                                                                                                               
				var filters = [];                                                                                                                                                                                                                                          
				filters.push(new sap.ui.model.Filter("SystemId", sap.ui.model.FilterOperator.EQ, systemId));                                                                                                                                                               
				/*var clnt = this.getView().getModel().getProperty(                                                                                                                                                                                                        
						"/SYSTEM_STATUSSet(Landscapeid='"                                                                                                                                                                                                                        
								+ this.landscapeId + "',Systemid='"                                                                                                                                                                                                                    
								+ systemId + "')/Systemclnt");                                                                                                                                                                                                                         
				filters.push(new sap.ui.model.Filter("Client",                                                                                                                                                                                                             
						sap.ui.model.FilterOperator.EQ, clnt));*/                                                                                                                                                                                                                
				filters.push(new sap.ui.model.Filter("BestPractice", sap.ui.model.FilterOperator.EQ, i));                                                                                                                                                                  
				var bindingInfo = {                                                                                                                                                                                                                                        
					path: "/ANALYSIS_JOBSet",                                                                                                                                                                                                                                 
					template: template,                                                                                                                                                                                                                                       
					filters: new sap.ui.model.Filter({                                                                                                                                                                                                                        
						filters: filters,                                                                                                                                                                                                                                        
						and: true                                                                                                                                                                                                                                                
					})                                                                                                                                                                                                                                                        
				};                                                                                                                                                                                                                                                         
				tables[i].bindItems(bindingInfo);                                                                                                                                                                                                                          
				tables[i].attachUpdateFinished(this.hideIfEmpty);                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		fillNotesTable: function (systemId) {                                                                                                                                                                                                                        
			var table = this.getView().byId("idNotes");                                                                                                                                                                                                                 
			var template = new sap.m.ColumnListItem({                                                                                                                                                                                                                   
				cells: [                                                                                                                                                                                                                                                   
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Resultmsg}"                                                                                                                                                                                                                                      
					}),                                                                                                                                                                                                                                                       
					new sap.m.Link({                                                                                                                                                                                                                                          
						text: "Launchpad",                                                                                                                                                                                                                                       
						href: "{ResolutionLink}",                                                                                                                                                                                                                                
						target: "_blank"                                                                                                                                                                                                                                         
					})                                                                                                                                                                                                                                                        
				]                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			var filters = [];                                                                                                                                                                                                                                           
			filters.push(new sap.ui.model.Filter("Sid", sap.ui.model.FilterOperator.EQ, systemId));                                                                                                                                                                     
			var bindingInfo = {                                                                                                                                                                                                                                         
				path: "/NOTESet",                                                                                                                                                                                                                                          
				template: template,                                                                                                                                                                                                                                        
				filters: filters                                                                                                                                                                                                                                           
			};                                                                                                                                                                                                                                                          
			table.bindItems(bindingInfo);                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		fillKPIsTable: function (systemId) {                                                                                                                                                                                                                         
			var table = this.getView().byId("idAGSKPI");                                                                                                                                                                                                                
			var template = new sap.m.ColumnListItem({                                                                                                                                                                                                                   
				cells: [                                                                                                                                                                                                                                                   
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Name}"                                                                                                                                                                                                                                           
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Value}"                                                                                                                                                                                                                                          
					})                                                                                                                                                                                                                                                        
				]                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			var filters = [];                                                                                                                                                                                                                                           
			filters.push(new sap.ui.model.Filter("Systemid", sap.ui.model.FilterOperator.EQ, systemId));                                                                                                                                                                
			var bindingInfo = {                                                                                                                                                                                                                                         
				path: "/SYSTEM_KPISet",                                                                                                                                                                                                                                    
				template: template,                                                                                                                                                                                                                                        
				filters: filters                                                                                                                                                                                                                                           
			};                                                                                                                                                                                                                                                          
			table.bindItems(bindingInfo);                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		getStatusName: function (level, prestring) {                                                                                                                                                                                                                 
			switch (level) {                                                                                                                                                                                                                                            
			case 0:                                                                                                                                                                                                                                                     
				return prestring + "Success";                                                                                                                                                                                                                              
			case 1:                                                                                                                                                                                                                                                     
				return prestring + "Warning";                                                                                                                                                                                                                              
			case 2:                                                                                                                                                                                                                                                     
				return prestring + "Error";                                                                                                                                                                                                                                
			default:                                                                                                                                                                                                                                                    
				return prestring + "None";                                                                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		getJobStatusName: function (level) {                                                                                                                                                                                                                         
			return this.getStatusName(level, "Jobs: ");                                                                                                                                                                                                                 
		},                                                                                                                                                                                                                                                           
		getExtractorStatusName: function (level) {                                                                                                                                                                                                                   
			return this.getStatusName(level, "Extractors: ");                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		getCollectorStatusName: function (level) {                                                                                                                                                                                                                   
			return this.getStatusName(level, "Collectors: ");                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		getBWStatusName: function (level) {                                                                                                                                                                                                                          
			return this.getStatusName(level, "BW Content: ");                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		getNoteStatusName: function (level) {                                                                                                                                                                                                                        
			return this.getStatusName(level, "Notes: ");                                                                                                                                                                                                                
		},                                                                                                                                                                                                                                                           
		getStatusState: function (level) {                                                                                                                                                                                                                           
			switch (level) {                                                                                                                                                                                                                                            
			case 0:                                                                                                                                                                                                                                                     
				return sap.ui.core.ValueState.Success;                                                                                                                                                                                                                     
			case 1:                                                                                                                                                                                                                                                     
				return sap.ui.core.ValueState.Warning;                                                                                                                                                                                                                     
			case 2:                                                                                                                                                                                                                                                     
				return sap.ui.core.ValueState.Error;                                                                                                                                                                                                                       
			default:                                                                                                                                                                                                                                                    
				return sap.ui.core.ValueState.None;                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		getStatusIcon: function (level) {                                                                                                                                                                                                                            
			switch (level) {                                                                                                                                                                                                                                            
			case 0:                                                                                                                                                                                                                                                     
				return "sap-icon://message-success";                                                                                                                                                                                                                       
			case 1:                                                                                                                                                                                                                                                     
				return "sap-icon://message-warning";                                                                                                                                                                                                                       
			case 2:                                                                                                                                                                                                                                                     
				return "sap-icon://message-error";                                                                                                                                                                                                                         
			default:                                                                                                                                                                                                                                                    
				return "sap-icon://sys-help";                                                                                                                                                                                                                              
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		getStatusIconColor: function (level) {                                                                                                                                                                                                                       
			switch (level) {                                                                                                                                                                                                                                            
			case 0:                                                                                                                                                                                                                                                     
				return sap.ui.core.IconColor.Positive;                                                                                                                                                                                                                     
			case 1:                                                                                                                                                                                                                                                     
				return sap.ui.core.IconColor.Critical;                                                                                                                                                                                                                     
			case 2:                                                                                                                                                                                                                                                     
				return sap.ui.core.IconColor.Negative;                                                                                                                                                                                                                     
			default:                                                                                                                                                                                                                                                    
				return sap.ui.core.IconColor.Neutral;                                                                                                                                                                                                                      
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		convertCollectorTime: function (time) {                                                                                                                                                                                                                      
			if (time === null) {                                                                                                                                                                                                                                        
				return "0";                                                                                                                                                                                                                                                
			}                                                                                                                                                                                                                                                           
			var t = time.toISOString().substring(0, 10).split("-").reverse();                                                                                                                                                                                           
			return t[0] + "." + t[1] + "." + t[2] + "  " + time.toTimeString().substring(0, 8);                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		convertExtractorTime: function (time) {                                                                                                                                                                                                                      
			if (time === null) {                                                                                                                                                                                                                                        
				return "0";                                                                                                                                                                                                                                                
			}                                                                                                                                                                                                                                                           
			var newTime = new Date(Date.UTC(parseInt(time.substring(0, 4)), parseInt(time.substring(4, 6)) - 1, parseInt(time.substring(6, 8)),                                                                                                                         
				parseInt(time.substring(8, 10)), parseInt(time.substring(10, 12)), parseInt(time.substring(12, 14))));                                                                                                                                                     
			var t = newTime.toISOString().substring(0, 10).split("-").reverse();                                                                                                                                                                                        
			return t[0] + "." + t[1] + "." + t[2] + "  " + newTime.toLocaleTimeString("en-US", {                                                                                                                                                                        
				hour12: false                                                                                                                                                                                                                                              
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		convertLogTime: function (time) {                                                                                                                                                                                                                            
			var numberPad = function (num, size) {                                                                                                                                                                                                                      
				var s = num + "";                                                                                                                                                                                                                                          
				while (s.length < size) {                                                                                                                                                                                                                                  
					s = "0" + s;                                                                                                                                                                                                                                              
				}                                                                                                                                                                                                                                                          
				return s;                                                                                                                                                                                                                                                  
			};                                                                                                                                                                                                                                                          
			if (time == null) {                                                                                                                                                                                                                                         
				return "0";                                                                                                                                                                                                                                                
			}                                                                                                                                                                                                                                                           
			var t = new Date(parseInt(time.substr(6, 13)));                                                                                                                                                                                                             
			return t.getFullYear() + "/" + numberPad(t.getMonth(), 2) + "/" + numberPad(t.getDay(), 2) + " " + numberPad(t.getHours(), 2) + ":" +                                                                                                                       
				numberPad(t.getMinutes(), 2) + ":" + numberPad(t.getSeconds(), 2);                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		getStatusIconBool: function (status) {                                                                                                                                                                                                                       
			return status == "X" ? "sap-icon://message-success" : "sap-icon://message-error";                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		getStatusIconColorBool: function (status) {                                                                                                                                                                                                                  
			return status == "X" ? sap.ui.core.IconColor.Positive : sap.ui.core.IconColor.Negative;                                                                                                                                                                     
		},                                                                                                                                                                                                                                                           
		getJobsStatusIcon: function (status) {                                                                                                                                                                                                                       
			switch (status) {                                                                                                                                                                                                                                           
			case "S":                                                                                                                                                                                                                                                   
				return "sap-icon://message-success";                                                                                                                                                                                                                       
			case "E":                                                                                                                                                                                                                                                   
				return "sap-icon://message-error";                                                                                                                                                                                                                         
			default:                                                                                                                                                                                                                                                    
				return "sap-icon://sys-help-2";                                                                                                                                                                                                                            
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		getJobsStatusIconColor: function (status) {                                                                                                                                                                                                                  
			switch (status) {                                                                                                                                                                                                                                           
			case "S":                                                                                                                                                                                                                                                   
				return sap.ui.core.IconColor.Positive;                                                                                                                                                                                                                     
			case "E":                                                                                                                                                                                                                                                   
				return sap.ui.core.IconColor.Negative;                                                                                                                                                                                                                     
			default:                                                                                                                                                                                                                                                    
				return sap.ui.core.IconColor.Neutral;                                                                                                                                                                                                                      
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		handleExtractorDetailsPress: function (oEvent) {                                                                                                                                                                                                             
			var table = this._oPopover.getContent()[0];                                                                                                                                                                                                                 
			this.src = oEvent.getSource();                                                                                                                                                                                                                              
			table.attachUpdateFinished({}, this.openPopover, this);                                                                                                                                                                                                     
			var template = new sap.m.ColumnListItem({                                                                                                                                                                                                                   
				cells: [                                                                                                                                                                                                                                                   
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: {                                                                                                                                                                                                                                                  
							path: "Time",                                                                                                                                                                                                                                           
							formatter: this.convertCollectorTime                                                                                                                                                                                                                    
						}                                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Phase}"                                                                                                                                                                                                                                          
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Runtime}"                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Records}"                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Message}"                                                                                                                                                                                                                                        
					})                                                                                                                                                                                                                                                        
				]                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			var sorter = new sap.ui.model.Sorter({                                                                                                                                                                                                                      
				path: "Time",                                                                                                                                                                                                                                              
				descending: true                                                                                                                                                                                                                                           
			});                                                                                                                                                                                                                                                         
			var filters = [];                                                                                                                                                                                                                                           
			filters.push(new sap.ui.model.Filter("Sysid", sap.ui.model.FilterOperator.EQ, this.systemId));                                                                                                                                                              
			filters.push(new sap.ui.model.Filter("Name", sap.ui.model.FilterOperator.EQ, oEvent.getSource().getCells()[0].getText()));                                                                                                                                  
			var bindingInfo = {                                                                                                                                                                                                                                         
				path: "/EXTRACTOR_RUNSet",                                                                                                                                                                                                                                 
				template: template,                                                                                                                                                                                                                                        
				filters: filters,                                                                                                                                                                                                                                          
				sorter: sorter                                                                                                                                                                                                                                             
			};                                                                                                                                                                                                                                                          
			table.bindItems(bindingInfo);                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		handleCollectorDetailsPress: function (oEvent) {                                                                                                                                                                                                             
			var table = this._oPopover2.getContent()[0];                                                                                                                                                                                                                
			this.src = oEvent.getSource();                                                                                                                                                                                                                              
			table.attachUpdateFinished({}, this.openPopover2, this);                                                                                                                                                                                                    
			var template = new sap.m.ColumnListItem({                                                                                                                                                                                                                   
				cells: [                                                                                                                                                                                                                                                   
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: {                                                                                                                                                                                                                                                  
							path: "Timestart",                                                                                                                                                                                                                                      
							formatter: this.convertCollectorTime                                                                                                                                                                                                                    
						}                                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: {                                                                                                                                                                                                                                                  
							path: "Timeend",                                                                                                                                                                                                                                        
							formatter: this.convertCollectorTime                                                                                                                                                                                                                    
						}                                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Status}"                                                                                                                                                                                                                                         
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Progress}"                                                                                                                                                                                                                                       
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Jobname}"                                                                                                                                                                                                                                        
					})                                                                                                                                                                                                                                                        
				]                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			var sorter = new sap.ui.model.Sorter({                                                                                                                                                                                                                      
				path: "Timeend",                                                                                                                                                                                                                                           
				descending: true                                                                                                                                                                                                                                           
			});                                                                                                                                                                                                                                                         
			var filters = [];                                                                                                                                                                                                                                           
			filters.push(new sap.ui.model.Filter("Systemid", sap.ui.model.FilterOperator.EQ, this.systemId));                                                                                                                                                           
			filters.push(new sap.ui.model.Filter("Name", sap.ui.model.FilterOperator.EQ, oEvent.getSource().getCells()[0].getText()));                                                                                                                                  
			var bindingInfo = {                                                                                                                                                                                                                                         
				path: "/COLLECTOR_RUNSet",                                                                                                                                                                                                                                 
				template: template,                                                                                                                                                                                                                                        
				filters: filters,                                                                                                                                                                                                                                          
				sorter: sorter                                                                                                                                                                                                                                             
			};                                                                                                                                                                                                                                                          
			table.bindItems(bindingInfo);                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		handleJobDetailsPress: function (event) {                                                                                                                                                                                                                    
			var table = this._oPopover3.getContent()[0];                                                                                                                                                                                                                
			this.src = event.getSource();                                                                                                                                                                                                                               
			table.attachUpdateFinished({}, this.openPopover3, this);                                                                                                                                                                                                    
			var template = new sap.m.ColumnListItem({                                                                                                                                                                                                                   
				cells: [                                                                                                                                                                                                                                                   
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: "{Jobname}"                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: {                                                                                                                                                                                                                                                  
							path: "StartDate",                                                                                                                                                                                                                                      
							formatter: this.convertJobDate                                                                                                                                                                                                                          
						}                                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.m.Text({                                                                                                                                                                                                                                          
						text: {                                                                                                                                                                                                                                                  
							path: "StartTime",                                                                                                                                                                                                                                      
							formatter: this.convertJobTime                                                                                                                                                                                                                          
						}                                                                                                                                                                                                                                                        
					}),                                                                                                                                                                                                                                                       
					new sap.ui.core.Icon({                                                                                                                                                                                                                                    
						src: {                                                                                                                                                                                                                                                   
							path: "Status",                                                                                                                                                                                                                                         
							formatter: this.getIconTypeJob                                                                                                                                                                                                                          
						},                                                                                                                                                                                                                                                       
						color: {                                                                                                                                                                                                                                                 
							path: "Status",                                                                                                                                                                                                                                         
							formatter: this.getIconColorJob                                                                                                                                                                                                                         
						},                                                                                                                                                                                                                                                       
						size: "2em"                                                                                                                                                                                                                                              
					})                                                                                                                                                                                                                                                        
				]                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			var filters = [];                                                                                                                                                                                                                                           
			filters.push(new sap.ui.model.Filter("SystemId", sap.ui.model.FilterOperator.EQ, this.systemId));                                                                                                                                                           
			filters.push(new sap.ui.model.Filter("Client", sap.ui.model.FilterOperator.EQ, event.getSource().getCells()[1].getText()));                                                                                                                                 
			filters.push(new sap.ui.model.Filter("Jobname", sap.ui.model.FilterOperator.EQ, event.getSource().getCells()[0].getText()));                                                                                                                                
			var bindingInfo = {                                                                                                                                                                                                                                         
				path: "/ANALYSIS_JOB_RUNSet",                                                                                                                                                                                                                              
				template: template,                                                                                                                                                                                                                                        
				filters: new sap.ui.model.Filter({                                                                                                                                                                                                                         
					filters: filters,                                                                                                                                                                                                                                         
					and: true                                                                                                                                                                                                                                                 
				})                                                                                                                                                                                                                                                         
			};                                                                                                                                                                                                                                                          
			table.bindItems(bindingInfo);                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		convertJobDate: function (date) {                                                                                                                                                                                                                            
			if (date === null) {                                                                                                                                                                                                                                        
				return "0";                                                                                                                                                                                                                                                
			}                                                                                                                                                                                                                                                           
			//var d = new Date(parseInt(date.substr(6, 13)))                                                                                                                                                                                                            
			var t = date.toISOString().substring(0, 10).split("-").reverse();                                                                                                                                                                                           
			return t[0] + "." + t[1] + "." + t[2];                                                                                                                                                                                                                      
		},                                                                                                                                                                                                                                                           
		convertJobTime: function (time) {                                                                                                                                                                                                                            
			var numberPad = function (num, size) {                                                                                                                                                                                                                      
				var s = num + "";                                                                                                                                                                                                                                          
				while (s.length < size) {                                                                                                                                                                                                                                  
					s = "0" + s;                                                                                                                                                                                                                                              
				}                                                                                                                                                                                                                                                          
				return s;                                                                                                                                                                                                                                                  
			};                                                                                                                                                                                                                                                          
			if (time === null) {                                                                                                                                                                                                                                        
				return "0";                                                                                                                                                                                                                                                
			}                                                                                                                                                                                                                                                           
			var d = new Date(Date.UTC(time.ms));                                                                                                                                                                                                                        
			return d.toISOString().substring(11, 19);                                                                                                                                                                                                                   
		},                                                                                                                                                                                                                                                           
		getIconTypeJob: function (status) {                                                                                                                                                                                                                          
			switch (status) {                                                                                                                                                                                                                                           
			case "F":                                                                                                                                                                                                                                                   
				return "sap-icon://message-success";                                                                                                                                                                                                                       
			case "A":                                                                                                                                                                                                                                                   
				return "sap-icon://message-error";                                                                                                                                                                                                                         
			case "R":                                                                                                                                                                                                                                                   
				return "sap-icon://physical-activity";                                                                                                                                                                                                                     
			case "S":                                                                                                                                                                                                                                                   
				return "sap-icon://accelerated";                                                                                                                                                                                                                           
			case "P":                                                                                                                                                                                                                                                   
				return "sap-icon://accelerated";                                                                                                                                                                                                                           
			default:                                                                                                                                                                                                                                                    
				return "sap-icon://status-critical";                                                                                                                                                                                                                       
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		getIconColorJob: function (status) {                                                                                                                                                                                                                         
			switch (status) {                                                                                                                                                                                                                                           
			case "F":                                                                                                                                                                                                                                                   
				return sap.ui.core.IconColor.Positive;                                                                                                                                                                                                                     
			case "A":                                                                                                                                                                                                                                                   
				return sap.ui.core.IconColor.Negative;                                                                                                                                                                                                                     
			default:                                                                                                                                                                                                                                                    
				return sap.ui.core.IconColor.Neutral;                                                                                                                                                                                                                      
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		openPopover: function () {                                                                                                                                                                                                                                   
			this._oPopover.openBy(this.src);                                                                                                                                                                                                                            
		},                                                                                                                                                                                                                                                           
		openPopover2: function () {                                                                                                                                                                                                                                  
			this._oPopover2.openBy(this.src);                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		openPopover3: function () {                                                                                                                                                                                                                                  
			this._oPopover3.openBy(this.src);                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
		onPopoverClose: function () {                                                                                                                                                                                                                                
			this._oPopover.close();                                                                                                                                                                                                                                     
		},                                                                                                                                                                                                                                                           
		onPopoverClose2: function () {                                                                                                                                                                                                                               
			this._oPopover2.close();                                                                                                                                                                                                                                    
		},                                                                                                                                                                                                                                                           
		onPopoverClose3: function () {                                                                                                                                                                                                                               
			this._oPopover3.close();                                                                                                                                                                                                                                    
		},                                                                                                                                                                                                                                                           
		onBack: function () {                                                                                                                                                                                                                                        
			history.go(-1);                                                                                                                                                                                                                                             
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		toExtractor: function (oEvent) {                                                                                                                                                                                                                             
			window.open("/sap/bc/webdynpro/sap/wd_e2e_wc_extractor_fwk?sap-language=EN");                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		toCollectors: function (oEvent) {                                                                                                                                                                                                                            
			window.open("/sap/bc/webdynpro/sap/wdc_ags_cc_lib?sap-language=EN");                                                                                                                                                                                        
		}                                                                                                                                                                                                                                                            
	});                                                                                                                                                                                                                                                           
});                                                                                                                                                                                                                                                            